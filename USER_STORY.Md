# üìã User Story Documentation - Stock Management System

**Version:** 1.0.0  
**Purpose:** Functional requirements documentation for the soap factory inventory management system.

---

## üë• User Roles (Actors)

Based on the Role-Based Access Control (RBAC) implemented in the system:

- **ADMIN**: Manager or owner with full access to all system features.
- **FACTORY**: Production staff responsible for recording batches and production results.
- **OFFICE**: Office staff handling raw material purchases and finished goods distribution.

---

## üì¶ 1. Raw Materials Management

| ID         | User Story                                                                                         | Acceptance Criteria                                                                                |
| ---------- | -------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------- |
| **US-1.1** | As an OFFICE/ADMIN, I want to add new raw materials so that I can track their stock levels.        | ‚Ä¢ Input includes unique Code, Name, and MOQ.<br>‚Ä¢ System rejects duplicate codes.                  |
| **US-1.2** | As an OFFICE/ADMIN, I want to record stock IN for raw materials when purchasing from suppliers.    | ‚Ä¢ Input includes date (WIB timezone), quantity, and description.<br>‚Ä¢ Raw material stock increases automatically. |
| **US-1.5** | As an ADMIN, I want to adjust stock levels manually for corrections. | ‚Ä¢ Can increase or decrease stock with positive or negative quantities.<br>‚Ä¢ Requires reason/description for audit trail.<br>‚Ä¢ Prevents negative stock levels.<br>‚Ä¢ Only ADMIN has access to this feature. |
| **US-1.3** | As a User, I want to see color indicators for raw material stock levels so I know when to reorder. | ‚Ä¢ Red: Stock < MOQ.<br>‚Ä¢ Yellow: Stock near MOQ.<br>‚Ä¢ Green: Healthy stock level.                  |
| **US-1.4** | As a User, I want to view the movement history (Audit Trail) of a raw material.                    | ‚Ä¢ Displays IN/OUT history, descriptions, batch references, and running balance.                    |

---

## üß™ 2. Production & Batches

| ID         | User Story                                                                                                          | Acceptance Criteria                                                                                                               |
| ---------- | ------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------- |
| **US-2.1** | As a FACTORY/ADMIN, I want to create a production Batch so that raw material consumption and finished good production are recorded automatically. | ‚Ä¢ Select multiple finished goods with quantities (for size variants) and multiple raw materials with quantities.<br>‚Ä¢ System creates automatic OUT movements for each raw material.<br>‚Ä¢ System creates automatic IN movements for each finished good.<br>‚Ä¢ All dates use WIB timezone (GMT+7). |
| **US-2.2** | As a System, I must reject batch creation if raw material stock is insufficient.                                    | ‚Ä¢ Stock validation occurs before the batch is saved.<br>‚Ä¢ Displays a specific error message for missing items.                    |
| **US-2.3** | As an ADMIN, I want to delete a mistakenly entered production batch.                                                | ‚Ä¢ Used raw material stock must be restored automatically.<br>‚Ä¢ Associated stock movements must be cleaned up.                     |

---

## üß¥ 3. Finished Goods Management

| ID         | User Story                                                                                     | Acceptance Criteria                                                                      |
| ---------- | ---------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------- |
| **US-3.1** | As a FACTORY/ADMIN, I want to record finished goods production results directly in the batch creation workflow. | ‚Ä¢ Factory staff inputs produced quantities for each finished good when creating a batch.<br>‚Ä¢ System automatically creates finished good IN movements.<br>‚Ä¢ Multiple finished goods can be produced in a single batch (for size variants).<br>‚Ä¢ ADMIN can still manually create finished good IN for corrections. |
| **US-3.2** | As an OFFICE/ADMIN, I want to record stock OUT for finished goods during distribution.         | ‚Ä¢ Automatically reduces finished good stock.<br>‚Ä¢ Prevents stock from becoming negative. |

---

## üìä 4. Reporting

| ID         | User Story                                                                   | Acceptance Criteria                                                                                     |
| ---------- | ---------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------- |
| **US-4.1** | As a User, I want to view stock reports in a monthly pivot table format.     | ‚Ä¢ Items as rows, dates (1-31) as columns.<br>‚Ä¢ View types: Opening Stock, IN, OUT, and Remaining Stock. |
| **US-4.2** | As an ADMIN, I want to correct stock data directly through the report table. | ‚Ä¢ Double-click a cell to edit the quantity.<br>‚Ä¢ Automatically updates movements and balances.          |
| **US-4.3** | As a User, I want to export reports to Excel for archiving purposes.         | ‚Ä¢ Excel file includes comprehensive movement history for the selected month.                            |

---

## üîê 5. Security & User Management

| ID         | User Story                                                         | Acceptance Criteria                                                                                          |
| ---------- | ------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------ |
| **US-5.1** | As an ADMIN, I want to manage user accounts (Add/Edit/Deactivate). | ‚Ä¢ Users assigned specific roles (ADMIN/FACTORY/OFFICE).<br>‚Ä¢ Passwords stored securely using bcrypt hashing. |
| **US-5.2** | As a System, I must restrict feature access based on user roles.   | ‚Ä¢ FACTORY cannot record material purchases or manually create finished good IN (only via batch).<br>‚Ä¢ OFFICE cannot create production batches.<br>‚Ä¢ Only ADMIN can adjust stock and manually create finished good IN for corrections. |
